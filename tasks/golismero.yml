---

- name: GoLismero | Clone git repo
  git: repo=https://github.com/golismero/golismero.git clone=yes force=yes dest=/opt/GoLismero

- name: GoLismero | Install prerrequisites
  package: name={{ item }} state=latest
  with_items:
    - nmap
    - sslscan

- name: GoLismero | Install PIP & Virtualenv
  easy_install:
    name: "{{ item }}"
    state: latest
  with_items:
    - pip
    - virtualenv

- name: GoLismero | Install pip requirements
  pip:
    requirements: "{{ item }}"
    state: present
  with_items:
    - /opt/GoLismero/requirements.txt
    - /opt/GoLismero/requirements_unix.txt

- name: GoLismero | Make main script executable
  file:
    path: /opt/GoLismero/golismero.py
    mode: 0755

- name: GoLismero | Create link to main script
  file:
    path: /usr/local/bin/golismero
    state: link
    src: /opt/GoLismero/golismero.py
